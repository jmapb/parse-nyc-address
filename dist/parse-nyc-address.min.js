const parseNycAddress=function(A){function E(A,E){return new RegExp("^"+E+"$").test(A)}const R={};let N=!1;const L={1:["MARBLE ?HI?L?L"],2:["THE ?B(RO)?N?X"],4:["ADDISLEIGH ?PA?R?K","BAYSIDE ?HI?L?LS?","BELLE? ?HA?RB(OR)?","BELLE?ROSE( MANOR)","BREEZY ?P(OI)?N?T","BR(OA)?D ?CHAN(NEL)?","CAMBRIA ?H(EI)?(GH)?TS?","COLLEGE ?P(OI)?N?T","E(AST)? ?ELMHURST","FA?R ?ROCKAWAY","FO?RE?ST ?HI?L?LS?","F(OR)?T ?TILDEN","FRE?SH ?M(EA)?DO?WS","HOLLIS ?HI?L?LS?","HOWARD ?B(EA)?CH","JACKSON ?H(EI)?G?H?TS?","(JOHN F.? )?KENNEDY AIRPO?R?T","JFK ?AIRPO?R?T","KEW ?GA?RDE?NS?( HI?L?LS?)?","LITTLE ?NE?CK","LA ?GUARDIA AIRPO?R?T","L(ONG)? ?IS?(LAND)? ?CITY","MID(DLE)? ?VI?L(LA)?GE?","OAKLA?ND ?GA?RDE?NS?","(S(OUTH)? )?OZONE ?PA?R?K","Q(UEE)?NS ?VI?L(LA)?GE?","REGO ?PA?R?K","(S(OUTH)? )?RICHMOND ?HI?L?LS?","ROCHDALE ?VI?L(LA)?GE?","ROCKAWAY ?B(EA)?CH","ROCKAWAY ?PA?R?K","ROCKAWAY ?P(OI)?N?T","S(AIN)?T ?ALBANS?","SPRINGFIELD ?GA?RDE?NS?","WAVE ?CRE?ST"],5:["STATEN ?ISL?(AND)?"],6:["NEW ?YORK( CITY)?","NY ?CITY"],7:["UNITED STATES( OF AMERICA)"]},O=["ADALBERT","ALBAN","ANDREW","ANN","ANTHONY","AUSTIN","CHARLES","CLAIR","EDWARD","FELIX","FRANCIS","GEORGE","JAMES","JOHN","JOSEPH","JUDE","JULIAN","LAWRENCE","LUKE","MARK","MARY","NICHOLAS","OUEN","PATRICK","PAUL","PETER","RAYMOND","STEPHEN","THERESA"].map((A=>"ST\\.? "+A+"'?S?")).concat(["AVE?(NUE)? OF","(BMT.Q.)?AVE?(NUE)? \\w","FRONT STR(EET)?","\\w STR(EET)?","FRONT R(OA)?D","\\w R(OA)?D","OF NEW ?YORK","OF NY","OF MANHATTAN","OF THE ?BRONX","OF BROOKLYN","OF Q(UEE)?NS","CE?N?TE?R Q(UEE)?NS","OF STATEN ?ISL?(AND)?","OF SI","PS.?IS 78 Q","HA?R?BO?R BU?I?LDI?N?G Q"],Object.values(L).flat());let S=new RegExp("\\b"+O.join("\\b|\\b")+"\\b|\\S+","g"),T=A.replace(/\.*[\s\r\n,]+|\.+$/g," ").trim().toUpperCase().match(S)??[];const I=["GAR","GARAGE","REAR","AA","AB","AF","AS","BA","BB","CE","ED","SF","1/2","1/3","2/3","1/4","3/4","INT","INTER","UNDER","UNDRGRND","UNDERGROUND","AIR","RIGHT","RIGHTS","RGHT","RGHTS","RGT","RGTS","E-BLDG","W-BLDG"],e=["A","B","C","D","FRONT"];let H=0;if(0===(T[0]??"").search(/\d/))for(H=1;H<T.length&&(I.includes(T[H])||e.includes(T[H])&&I.concat(e).includes(T[H+1]??""));)H++;let D=9,B=9,n=!1,t="";const s={MANHATTAN:1,M:1,MA:1,MH:1,MN:1,MAN:1,MANH:1,BRONX:2,BX:2,BRX:2,BRON:2,BROOKLYN:3,BK:3,BRK:3,BKLYN:3,BRKLYN:3,QUEENS:4,Q:4,QU:4,QN:4,QNS:4,ARVERNE:4,ASTORIA:4,AUBURNDALE:4,BAYSIDE:4,BEECHHURST:4,BRIARWOOD:4,CORONA:4,DOUGLASTON:4,EDGEMERE:4,ELMHURST:4,FLUSHING:4,GLENDALE:4,HOLLIS:4,JAMAICA:4,LAURELTON:4,LIC:4,MALBA:4,MASPETH:4,NEPONSIT:4,RIDGEWOOD:4,ROSEDALE:4,SUNNYSIDE:4,WHITESTONE:4,WOODHAVEN:4,WOODSIDE:4,SI:5,NY:6,NYNY:6,NYC:6,US:7,USA:7},C={100:1,101:1,102:1,104:2,112:3,111:4,113:4,114:4,116:4,103:5};let U="";for(;T.length-H>1;){if(U=T[T.length-1]??"",9===B){const A=/^(\d\d\d)\d\d/.exec(U);if(Array.isArray(A)){t=U,B=C[A[1]]??7,T.pop();continue}}if(D=s[U]??9,9===D){for(const A in L)if(L[A].some((A=>E(U,A)))){D=parseInt(A);break}if(9===D)break}if(6===D&&(n=!0),T.pop(),D<6)break}if(D>5&&(B<6?D=B:n&&(D=1)),H>0){T.length-H>1&&e.includes(T[H]??"")&&!["ST","AV","AVE","AVENUE"].includes(T[H+1]??"")&&H++;let A=T.slice(0,H).join(" ");""!==A&&(R.housenumber=A)}let G=T.slice(H).join(" ");if(""!==G&&(R.street=G),["","10463"].includes(t)&&![3,4,5].includes(D)){const A=G.match(/MARBLE HI?L?L HOUSES( B(UI)?LDI?N?G (\d+))?/);if(Array.isArray(A))A.length()>2&&["4","5","6","11"].contains(A[2])?D=2:N=!0;else{if(["ADRIAN AVE?(NUE)?","FO?R?T CHARLES PL(ACE)?","JACOBUS PL(ACE)?","TERRACE V(IE)?W AVE?(NUE)?","VAN CORLEAR PL(ACE)?","METRO NORTH-MARBLE HI?L?L","BROADWAY BRI?DGE?","MARBLE HI?L?L LA?NE?","ATMOSPHERE CHARTER SCH(OO)?L?","(THE )?SHOPS AT MARBLE HI?L?L","IRT-1-MARBLE HI?L?L-225 STREET"].some((A=>E(G,A))))N=!0;else if(H>0&&!T[0].includes("-")){const A=parseInt(T[0]);("BROADWAY"===G&&(5485===A||A>=5170&&A<=5300||A>=5301&&A<=5320&&D<3||A>=5321&&A<=5400||A>=5401&&A<=5321&&D<3||A>=5421&&A<=5480)||E(G,"(W(EST)? )?22[578](TH)?( STR?(EET)?)?")&&A>=40&&A<=176)&&(N=!0)}}N&&(D=1)}return D<6&&(R.borough=D),""!==t&&(R.postcode=t),N&&(R.marble_hill=!0),R};"undefined"!=typeof module&&(module.exports=parseNycAddress);
